<table class="table table-hover text-center table-bordered">
	<thead class="thead-inverse">
		<tr>
			<th class="sticky" style="width: 15vw">Channel</th>
			{{#each providers as provider}}
				<th class="sticky text-center">
					<a class="white" href="{{provider.url}}" target="_blank">
						{{provider.name}}
					</a>
				</th>
			{{/each}}
		</tr>
	</thead>
	<tbody>
		{{#each channels as channel}}
		<tr>
			<th scope="row">{{channel.Name}}</th>
			{{#each providers as provider}}
				<td>
					{{#each getBadges(channel, provider) as badge}}
						<span class="badge badge-pill {{badge.className}}">{{badge.text}}</span>
					{{/each}}
				</td>
			{{/each}}
		</tr>
		{{/each}}
	</tbody>
</table>

<script>

	import providers from './data/providers.js'

	export default {
		data() {
			return {
				providers
			}
		},
		helpers: {
			getBadges(channel, provider) {
				const badges = provider.badges
				const providerChannelSupport = channel.Providers[provider.name]

				if (typeof providerChannelSupport === 'object') {
					return Object.keys(providerChannelSupport)
						.filter(id => providerChannelSupport[id])
						.map(id => badges[id])
				} else {
					const id = providerChannelSupport || 'false'
					return [ badges[id] ]
				}
			}
		}
	}
</script>
